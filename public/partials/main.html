<!-- MGS: I will be leaving comments in this format - my initials MGS followed by my comment -->
<!-- <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title> -->
<!--     <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700" rel="stylesheet"> --> <!-- added the font -->
<!-- </head>
<body> -->
<!-- MGS: because I am using angular and front-end routing this file will not have a <body> tag. It will be placed inside NG-VIEW in the main template -->
<!-- we have not included any other wrapper elements - but there might be a need for more wrapper, depending on final styling. -->

<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '181237689004618');
fbq('track', 'PageView');
fbq('track', 'Lead');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=181237689004618&ev=PageView&noscript=1"
/></noscript>
<!-- DO NOT MODIFY -->
<!-- End Facebook Pixel Code -->


<div class="login-info-container">
    <p ng-if="!main.currentUserProfile">
        You are not logged in<br>
        log in now with <a href="auth" target="_self">PayPal</a>, <a href="/authgoogle" target="_self">Google</a>, or <a target="_self" href="/authfacebook">Facebook</a>
    </p>
    <div ng-if="main.currentUserProfile">
        <p>Logged in as:</p>
        <p>Name: {{main.currentUserProfile.name}}</p>
        <p>Email: {{main.currentUserProfile.email}}</p>
    </div>
    <p ng-if="main.currentUserProfile"><a target="_self" href="logout">logout</a></p>
</div>
    <!-- MGS: family name is not implemented yet - style as desired -->

    <div class="character-wrapper container">
        <!--added div-->
        <div ng-if="!main.loaded" class="loading-overlay">
            <h1 class="loading-message">LOADING...</h1>
        </div>
        <div class="tab-wrapper">
            <!-- start tab section -->
            <section id="tabs">
                <!-- tabs : this structure might change depending on the tab component used-->
                <!-- tab menu -->
                <ul>
                    <li class="active"><a target="_self" href="#nameGender" data-toggle="tab">Name and Gender</a></li>

                    <!-- MGS: the tab li elements (or whatever element they will get changed to will dynamically repeat based on the information retrieved from the database). I have commented out all but the first LI to demonstrate that -->
                    <li ng-repeat="property in main.schema"><a target="_self" ng-href="{{'#' + property.image_type}}" data-toggle="tab">{{property.image_type_label}}</a></li>
                    <!--<li class="active"><a data-toggle="tab" href="#nameGender">NAME & GENDER</a></li>
                    <li><a href="#skin">SKIN</a></li>
                    <li><a href="#hair">HAIR</a></li>
                    <li><a href="#eyes">EYES</a></li>
                    <li><a href="#nose">NOSE</a></li>
                    <li><a href="#mouth">MOUTH</a></li> -->
                </ul>
                <!-- MGS: the tabs will dynamically repeat as their data is pulled from database, similar to tab headings (see comment at line 31). The first tab - Name ang Gender is special and does not repeat, because every avatar will have a name and gender, but the rest will be dynamic. -->
                <!-- tab content -->
                <div class="tab-content">
                    <!-- NAME & GENDER tab -->
                    <div id="nameGender" class="tab-pane tab-pane-style active">
                        <!-- MGS: this selector not implemented yet. Style as desired -->
                        <h3>CHILD OR ADULT?</h3>
                        <div class="select-css">
                            <select ng-model="main.currentAvatarAge" ng-change="main.switchSchema(); main.isPristine = false">
                                <option value="adult">Adult</option>
                                <option value="child">Child</option>
                            </select>
                        </div>
                        <h3>{{main.currentAvatarAge === 'adult' ? 'ADULT' : 'CHILD'}}'S NAME</h3>
                        <!-- MGS: this input field was bound to angular -->
                        <input type="text" id="avatar-name-input" placeholder="ex. DADDY" ng-model="main.currentAvatar.name" ng-change="main.isPristine = false" required onfocus="this.placeholder = ''" onblur="this.placeholder = 'ex. DADDY'">
                        <a href="javascript:void(0);" class="i-circle small"><img src="/img/i_symbol.png" alt="" /></a>
                        <div class="error-msg">Error message</div>
                        <h3>{{main.currentAvatarAge === 'adult' ? 'ADULT' : 'CHILD'}}'S GENDER</h3>
                        <!-- MGS: this selector not implemented yet. Style as desired -->
                        <div class="select-css">
                            <select ng-model="main.currentAvatarGender" ng-change="main.switchSchema(); main.isPristine = false">
                                <option value="male">{{main.currentAvatarAge === 'adult' ? 'Man' : 'Boy'}}</option>
                                <option value="female">{{main.currentAvatarAge === 'adult' ? 'Woman' : 'Girl'}}</option>
                            </select>
                        </div>
                        <h3>KID'S BIRTHDAY</h3>
                        <input type="date" name="childDate" placeholder="MM/DD/YYYY" class="date-input">
                    </div>
                    <!-- MGS: The way my selector works currently is thas they clickable choices are actually hidden radio buttons with a styled label which contains a preview image. The buttons themselves can be hidden using css. I wrote a sample repeatable tab to reflect that. If you think that is too difficult to work around, please leave a comment and we can rethink the approach -->
                    <div id="{{property.image_type}}" class="tab-pane tab-pane-style" ng-repeat="property in main.schema">
                        <h3>{{property.image_type_label}}</h3>
                        <div class="color-thumbs" ng-show="!property.image_type.endsWith('nose') && !property.image_type.endsWith('glasses')">
                            <div ng-repeat="value in property.values | unique: 'color_code'">
                                <input id="radio_btn_color_{{value.image_id}}_{{value.color_name}}" type="radio" ng-value="value.color_code" name="radio_color_{{property.image_type}}" ng-bind="main.imageUrls[main.currentAvatar.images[$parent.$index]].color_code" ng-model="main.colorCodes[property.image_type]"></input>
                                <label class="color-thumb" ng-style="{'background-color': value.color_code}" for="radio_btn_color_{{value.image_id}}_{{value.color_name}}"></label>
                            </div>
                            <!--                         <input id="radio_btn_color_2" type="radio" value="red" name="radio_color"></input>
                                    <label class="color-thumb" ng-style="{'background-color': 'red'}" for="radio_btn_color_2" ></label> -->
                            <!--                         <div class="color-thumb" ng-style="{'background-color': 'blue'}"></div>
                                    <div class="color-thumb" ng-style="{'background-color': 'red'}"></div> -->
                            <div class="clearfix"></div>
                            {{JSON.stringify(main.colorCodes)}}
                        </div>
                        <div ng-repeat="value in property.values | filter:{color_code: main.colorCodes[property.image_type]}">
                            <input id="radio_btn_{{value.image_id}}" type="radio" value="{{value.image_id}}" name="radio_{{property.image_type}}" ng-model="main.currentAvatar.images[$parent.$index]"></input>
                            <label for="radio_btn_{{value.image_id}}" class="body-part-label">
                                <img height="" ng-src="{{value.icon_location}}">
                            </label>

                        </div>
                    </div>



                </div> <!-- tab content -->
                <!-- bottom buttons -->
                <!-- MGS: The buttons are not implemented yet, in the future the submit button will redirect to the "preview" view -->


            </section><!-- end id:tabs -->
            <!-- end tab section -->
            <div class="tabs-btn-wrapper">
                <div class="tab-btn-clear">
                    <a ng-click="main.deleteAvatarsConfirm()" href="" target="_self">Clear All</a><!--added class-->
                </div>
                <div class="tab-btn-save">
                    <a href="" ng-click="main.saveChanges('alert');">Save Changes</a><!--added class-->
                </div>
            </div>
        </div>

        <!-- MGS: The slider is tricky. Each li will actually contain several layered images, the transparency as well as each of the body parts overlaying one another (position-absolute), you can style them as if they were one image -->
        <!-- start slider --><!-- in order to stylize the images with absolute position we need to add different class for each element, for example .eyes-img, .body-img, .hair-img etc -->
        <section id="slider">
            <div class="header-info">
                <a class="pencil" href="javascript:void(0);"></a>
                <!-- family's name -->
                <input type="text" name="" id="" placeholder="FAMILY NAME" value="THE TOKOUSBALIDES" />
                <!-- help button -->
                <a href="javascript:void(0);" class="q-circle">?</a>
            </div>
            <!-- slides -->
            <div class="carousel-demo" style="width: 100%;">
                <ul rn-carousel rn-carousel-transition="hexagon" rn-carousel-controls rn-carousel-index="main.carousel_index" class="carousel3">
                   <li>
                        <ul>
                            <li>
                            <!--     <img class="" src="img/background.png"> -->
                                <img class="" ng-repeat="value in main.results[0].images" ng-src="{{main.imageUrls[value].location}}">
                            </li>
                            <!-- new character -->
                            <!-- not implemented yet but will function predictably -->
                            {{main.currentAvatarIndex}}
                            <li ng-if="main.currentAvatarIndex === main.totalAvatars && main.currentAvatarIndex !== main.maxAvatars">
                                <div class="q-circle big" ng-click="main.nextAvatar()">+</div>
                                <div class="new-char-txt">YOU ARE ABOUT TO CREATE A NEW CHARACTER</div>
                            </li>
                        </ul>
                   </li> 
                   <li>
                        <ul>
                            <li>
                                <!-- <img class="" src="img/background.png"> -->
                                <img class="" ng-repeat="value in main.results[1].images" ng-src="{{main.imageUrls[value].location}}">
                            </li>
                            <!-- new character -->
                            <!-- not implemented yet but will function predictably -->
                            {{main.currentAvatarIndex}}
                            <li ng-if="main.currentAvatarIndex === main.totalAvatars && main.currentAvatarIndex !== main.maxAvatars">
                                <div class="q-circle big" ng-click="main.nextAvatar()">+</div>
                                <div class="new-char-txt">YOU ARE ABOUT TO CREATE A NEW CHARACTER</div>
                            </li>
                        </ul>
                   </li> 
                   <li>
                        <ul>
                            <li>
                               <!--  <img class="" src="img/background.png"> -->
                                <img class="" ng-repeat="value in main.results[2].images" ng-src="{{main.imageUrls[value].location}}">
                            </li>
                            <!-- new character -->
                            <!-- not implemented yet but will function predictably -->
                            {{main.currentAvatarIndex}}
                            <li ng-if="main.currentAvatarIndex === main.totalAvatars && main.currentAvatarIndex !== main.maxAvatars">
                                <div class="q-circle big" ng-click="main.nextAvatar()">+</div>
                                <div class="new-char-txt">YOU ARE ABOUT TO CREATE A NEW CHARACTER</div>
                            </li>
                        </ul>
                   </li> 
                </ul>
            </div>

            <!-- slider navigation & input -->
            <ul class="avatar-selection">
                <!--added class-->
                <li style="visibility: hidden;">
                    <a class="prev-btn" ng-class="{inactive: main.currentAvatarIndex === 1}" href="" ng-click="main.prevAvatar()"></a><!--added class-->
                </li>
                <li>
                    <!-- MGS: Input was connected to angular -->
                    <input style="display:none;" type="text" class="" id="avatar-name-input" placeholder="TIMOS" ng-model="main.currentAvatar.name" required autofocus="true">
                    <div style="display:block;" class="salutation-wrapper" ng-class="{ghost: !main.currentAvatar.name || main.currentAvatar.name === ''}">Hey <span ng-bind="main.currentAvatar.name" name="salutation">Timos!</span><a href="javascript:void(0);" class="pencil"></a></div>
                </li>
                <li style="visibility: hidden;">
                    <a class="next-btn" ng-class="{inactive: main.currentAvatar.name === '' || main.currentAvatar.name === undefined || main.currentAvatarIndex === main.totalAvatars}" href="" ng-click="main.rightArrowClick()"></a><!--added class-->
                </li>
            </ul>
            <div class="clearfix"></div>
        </section><!-- end id:slider -->
        <!-- end slider -->
        <div class="clearfix"></div>
    </div>
    <!-- bottom part -> menu & buttons -->
    <section id="bottomPartWrapper">
        <div class="container">
            <!--added div-->
            <div class="w-col-md-4"><a href="javascript:void(0);" class="footer-btn back-btn">Back</a></div><!--added div-->
            <!-- steps menu -->
            <ul class="steps-menu w-col-md-4">
                <!--added class-->
                <li class="done">
                    <span class="circle"></span>
                    <span class="bar"></span>
                    <span class="avatar-label">AVATAR</span><!--changed class-->
                </li>
                <li class="active">
                    <span class="circle"></span>
                    <span class="bar"></span>
                    <span class="avatar-label">FAMILY</span>
                </li>
                <li class="todo">
                    <span class="circle"></span>
                    <span class="bar"></span>
                    <span class="avatar-label">BOOK</span>
                </li>
            </ul>
            <div class="w-col-md-4">
                <!--added div-->
                <a ng-href="/previewfamily" target="_self" ng-click="main.saveChanges()" class="footer-btn">My characters are ready</a>
                <a href="/previewbook" class="skip-btn">SKIP TO PREVIEW THE BOOK</a>
            </div>
        </div>
    </section><!-- end id:bottomPartWrapper -->

